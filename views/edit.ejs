<html lang="en">
<head>
    <title>Diamond Magaement System</title>
</head>
<body>
  
  <% for (var i of updatedata){ %>
  <script>
  async function updateDiamond(id) {
      //console.log(id);
      //console.log(i);

              let updata = {
              diamondID: document.getElementById("diamondID").value,
              shape: document.getElementById("shape-select").value,
              carat: document.getElementById("carat").value,
              color: document.getElementById("color").value,
              clarity: document.getElementById("clarity-select").value,
              cut: document.getElementById("cut-select").value,
              polish: document.getElementById("polish-select").value,
              symmetry: document.getElementById("symmetry-select").value,
              fluorescence: document.getElementById("fluorescence-select").value,
              price: document.getElementById("price").value,
            };
           //console.log(updata);
   /*   let updata = {
    diamondID: i.diamondID,
    shape: i.shape,
    carat: i.carat,
    color: i.color,
    clarity: i.clarity,
    cut: i.cut,
    polish: i.polish,
    symmetry: i.symmetry,
    fluorescence: i.fluorescence,
    price: i.price,
  };*/
  
      const response = await fetch("/updateDiamond/"+ id, { method: 'PUT', headers: {
      "Content-Type": "application/json",
      // 'Content-Type': 'application/x-www-form-urlencoded',
    }, body : JSON.stringify(updata)});
      const res = await response.json();
      console.log(res);
  }
 
</script>
        <h1>Update Diamond Information</h1>
    </div>
    <div>
        
            <label ><b>Diamond ID : </b></label><br>
                <input type="text" name="diamondID" id="diamondID" value="<%= i.diamondID %>" pattern="[0-9]+" minlength="10" maxlength="10" readonly required><br>
            <small>Only available for number & must 10 digits</small><br><br>
            <label ><b>Shape and Cutting Style : </b></label><br>
            <select name="shape" id="shape-select" required>
                <option value="<%= i.shape %>"><%= i.shape %></option>
                <option value="Round">Round</option>
                <option value="Princess">Princess</option>
                <option value="Oval">Oval</option>
                <option value="Marquise">Marquise</option>
                <option value="Pear">Pear</option>
                <option value="Cushion">Cushion</option>
                <option value="Emerald">Emerald</option>
                <option value="Asscher">Asscher</option>
                <option value="Heart">Heart</option>
              </select><br><br>
    
            <label ><b>Carat Weight : </b></label><br>
                <input type="text" name="carat" value="<%= i.carat %>" id="carat"pattern="[0-9]*[.,]?[0-9]*" maxlength="4" required><br>
                <small>e.g. 1.50</small><br><br>
    
           <label ><b>Color Grade : </b></label><br>
                <input type="text" name="color" value="<%= i.color %>" id="color" pattern="[A-Z]" maxlength="1"required><br>
                <small>e.g. D</small><br><br>
           
                <label ><b>Clarity Grade : </b></label><br>
                <select name="clarity" id="clarity-select" required>
                    <option value="<%= i.clarity %>"><%= i.clarity %></option>
                    <option value="F">F</option>
                    <option value="IF">IF</option>
                    <option value="VV1">VV1</option>
                    <option value="VV2">VV2</option>
                    <option value="V1">V1</option>
                    <option value="V2">V2</option>
                    <option value="SI1">SI1</option>
                    <option value="SI2">SI2</option>
                    <option value="I1">I1</option>
                  </select><br><br>
    
                  <label ><b>Cut Grade : </b></label><br>
                <select name="cut" id="cut-select" required>
                    <option value="<%= i.cut %>" ><%= i.cut %></option>
                    <option value="Excellent" >Excellent</option>
                    <option value="Very Good">Very Good</option>
                    <option value="Good">Good</option>
                    <option value=Fair">Fair</option>
                  </select><br><br>
    
                  <label ><b>Polish : </b></label><br>
                  <select name="polish" id="polish-select" required>
                    <option value="<%= i.polish %>"><%= i.polish %></option>
                      <option value="Excellent">Excellent</option>
                      <option value="Very Good">Very Good</option>
                      <option value="Good">Good</option>
                      <option value=Fair">Fair</option>
                    </select><br><br>
    
                    <label ><b>Symmetry : </b></label><br>
                    <select name="symmetry" id="symmetry-select" required>
                        <option value="<%= i.symmetry %>"><%= i.symmetry %></option>
                        <option value="Excellent">Excellent</option>
                        <option value="Very Good">Very Good</option>
                        <option value="Good">Good</option>
                        <option value=Fair">Fair</option>
                      </select><br><br>
    
                      <label ><b>Fluorescence : </b></label><br>
                      <select name="fluorescence" id="fluorescence-select" required>
                            <option value="<%= i.fluorescence %>"><%= i.fluorescence %></option>
                          <option value="Strong">Strong</option>
                          <option value="Medium">Medium</option>
                          <option value="Faint">Faint</option>
                          <option value=None">None</option>
                        </select><br><br>
                        
            <label ><b>Price : </b></label><br>
                $ <input type="text" name="price" id="price"value="<%= i.price %>"pattern="[0-9]+" required><br><br>
            </p>
            <button onclick="updateDiamond(<%= JSON.stringify(i._id) %> )" style="width:100px;">Edit</button>
            <!--<input id="update" type="submit" value="Update" />--> <% } %>
        <a href="/crud"><button style="width:100px;">Back</button></a>
    </div>
</body>

</html>
